<div *ngIf="!done && !empty" class="extend-term" fxLayout="column">

  <p class="title-space">Seleccione las compras que desea ampliar:</p>
  <ngx-simplebar [options]="{autoHide: false}" class="extend-term__scrollbar" fxFlex>
    <div class="extend-term__table-wrapper">
      <mat-table [dataSource]="allowedMovements"
                class="extend-term__table">

        <ng-container matColumnDef="select">
          <mat-header-cell *matHeaderCellDef credixHeaderCell>
          </mat-header-cell>
          <mat-cell *matCellDef="let element" credixCell>
            <credix-checkbox-button class="checkbox-dimension" (emitCheckBox)="change($event.checked, element)"
                                    [value]="element">
            </credix-checkbox-button>
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="date">
          <mat-header-cell *matHeaderCellDef credixHeaderCell >{{'Fecha'}}</mat-header-cell>
          <mat-cell *matCellDef="let element"
                    credixCell> {{element.originDate | dateFormatter: "shortAlphanumeric"}}  </mat-cell>
        </ng-container>

        <ng-container matColumnDef="commerce">
          <mat-header-cell *matHeaderCellDef credixHeaderCell>{{'Comercio'}}</mat-header-cell>
          <mat-cell *matCellDef="let element" credixCell>
            {{element.establishmentName}}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="quotas">
          <mat-header-cell *matHeaderCellDef credixHeaderCell>{{'Cuotas pendientes'}} </mat-header-cell>
          <mat-cell *matCellDef="let element"
                    credixCell>
                    <span>{{ element.totalPlanQuota }}</span>
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="amount">
          <mat-header-cell *matHeaderCellDef credixHeaderCell>{{'Monto a ampliar'}}</mat-header-cell>
          <mat-cell *matCellDef="let element"
                    credixCell>
            <credix-numeric-block fontWeight="bold" [prefix]="element.originCurrency.currency" [value]="element.originAmount"
                                  ></credix-numeric-block>
          </mat-cell>
        </ng-container>

        

        <mat-header-row *matHeaderRowDef="displayedColumns, sticky: true" credixHeaderRow></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;" credixRow></mat-row>
      </mat-table>
    </div>
  </ngx-simplebar>
  <div fxLayout="row" fxLayoutAlign="flex-end" fxLayoutGap="16px">
    <credix-amount-summary label='Monto a ampliar' [amount]='amountSummary'>
    </credix-amount-summary>
  </div>

  <div class="actions-footer" fxLayout="row" fxLayoutAlign="flex-end" fxLayoutGap="16px">
    <credix-button [disabled]="selection.length === 0" (buttonClick)="next()">Continuar</credix-button>
  </div>
  

</div>

<!-- Por si acaso -->
<!-- 

  
          <span *ngIf='allowedMovement.promoApply'
                [class.extend-term__promo-apply__subtitle]='allowedMovement.promoApply'>
              {{ allowedMovement.promoMessage }}
            </span>



 -->

<ng-template #disabledTemplate>
  <credix-result-notification
    class="extend-term__empty"
    status="error"
    [message]="message"
    [title]="title">
  </credix-result-notification>
</ng-template>

<credix-result-notification *ngIf="!title && empty" class="extend-term__empty" status="info"
title="{{warningTag || 'No tiene consumos para ampliar en este momento.'}}">
</credix-result-notification>

<ng-container [ngTemplateOutlet]="template"></ng-container>
