<mat-card class="add-automatics">
  <h1>Añadir pago automático</h1>
  <div fxLayout="row" fxLayoutAlign="space-between">
    <span><strong>Nuevo pago automático</strong></span>
    <form [formGroup]="newAutomaticsForm" class="add-automatics__form" fxLayout="column">

      <credix-select formControlName="publicServices" label="Servicio">
        <mat-option *ngFor="let services of publicServicesList" [value]="services.publicServiceCategoryId">
          {{services.publicServiceCategory}}
        </mat-option>
      </credix-select>

      <credix-select formControlName="company" label="Compañía">
        <mat-option *ngFor="let enterpriseServices of publicEnterpriseList"
                    [value]="enterpriseServices.publicServiceEnterpriseId">
          {{enterpriseServices.publicServiceEnterpriseDescription}}
        </mat-option>
      </credix-select>

      <credix-input-field formControlName="phoneNumber" label="Número de teléfono"
                          mask="0000-0000"></credix-input-field>

      <credix-input-field formControlName="nameOfAutomatics" label="Nombre del pago automático"></credix-input-field>

      <credix-input-field class="mb-8px" formControlName="maxAmount" label="Monto máximo a pagar" mask="separator"
                          thousandSeparator="."></credix-input-field>

      <credix-input-field (click)="openCalendar()"
                          [displayValue]="newAutomaticsForm.controls.startDate.value | dateFormatter: 'alphanumeric'"
                          [readonly]="true"
                          class="mb-8px add-automatics__input calendar" formControlName="startDate"
                          label="Fecha inicial de pago">
        <mat-icon class="calendar-icon" suffix svgIcon="calendar"></mat-icon>
      </credix-input-field>

      <credix-select formControlName="periodicity" label="Periocidad">
        <mat-option *ngFor="let periodicity of periodicityList" [value]="periodicity.id">
          {{periodicity.description}}
        </mat-option>
      </credix-select>

      <credix-select formControlName="currency" label="Tipo de Moneda">
        <mat-option *ngFor="let cur of currencyList"
                    [value]="cur.id">
          {{cur.description}}
        </mat-option>
      </credix-select>
    </form>
  </div>

  <div class="add-automatics__credix-code" fxLayout="row" fxLayoutAlign="space-between">
    <mat-divider></mat-divider>
    <div class="content" fxFlex="210px" fxLayout="column">
      <span><strong>Código MiCredix</strong></span>
      <p style="font-size: 14px;">Ingrese el código generado en la aplicación
        <credix-link-button>Código MiCredix</credix-link-button>
        <mat-icon style="width: 6px; height: 10px; fill:#239DF7" svgIcon="chevron_right"></mat-icon>
      </p>
    </div>
    <credix-code-input [(codeFormControl)]="codeCredix" [length]="6" class="w-50"
                       errorMessage="Introduzca el codigo de confirmación">
    </credix-code-input>
  </div>

  <div class="add-automatics__footer" fxLayout="row" fxLayoutAlign="flex-end">
    <div fxLayoutGap="16px">
      <credix-button (buttonClick)="back()" text="Atrás" type="secondary"></credix-button>
      <credix-button (buttonClick)="addAutomaticPayment()" [disabled]="!newAutomaticsForm.valid"
                     [text]="'Añadir'"></credix-button>
    </div>
  </div>
</mat-card>
