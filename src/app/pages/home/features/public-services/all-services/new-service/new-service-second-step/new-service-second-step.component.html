<form [formGroup]="confirmFormGroup" class="new-service-second-step" fxLayout="column">

  <div class="new-service-second-step__content" fxLayout="row" fxLayoutAlign="space-between">
    <span fxFlex="150px"><strong>Datos de referencia</strong></span>

    <div class="left-content mb-8px" fxLayout="column">
      <span class="mb-16px"><strong>{{reference}}</strong></span>
      <credix-checkbox-button (emitCheckBox)="onCheckboxChanged($event.checked)"
                              label="Guardar como favorito"></credix-checkbox-button>
      <credix-input-field *ngIf="showInput" formControlName="favorite"
                          class="new-service-second-step__content__input favorite"
                          label="Nombre del favorito"></credix-input-field>
    </div>
  </div>

  <mat-divider credixDivider></mat-divider>

  <div class="new-service-second-step__content" fxLayout="row" fxLayoutAlign="space-between">
    <span fxFlex="150px"><strong>Datos de la factura</strong></span>

    <div class="left-content" fxLayout="column" fxLayoutGap="16px">

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Nombre</span>
        <span>{{name}}</span>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Mes al cobro</span>
        <span>{{month}}</span>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Vencimiento</span>
        <span>{{expirationDate | dateFormatter : 'alphanumeric'}}</span>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span><strong>Monto a pagar</strong></span>
        <span><credix-numeric-block [prefix]="currencySymbol" [value]="amount" fontWeight="bold"></credix-numeric-block></span>
      </div>
    </div>

  </div>

  <mat-divider *ngIf="paymentType !== 'E'" credixDivider></mat-divider>

  <div *ngIf="paymentType !== 'E'" class="new-service-second-step__content"
       fxLayout="row"
       fxLayoutAlign="space-between">
    <span><strong>Monto a pagar</strong></span>
    <div class="left-content" fxLayout="column" fxLayoutGap="16px">
      <credix-radio-button (emitRadioButton)="onSelectRadioButtons($event)"
                           [value]="amount"
                           label="Monto pendiente total"
                           name="payment"></credix-radio-button>
      <credix-radio-button (emitRadioButton)="onSelectRadioButtons($event)"
                           [value]="1"
                           label="Otro"
                           name="payment"></credix-radio-button>
      <credix-input-field *ngIf="newAmount"
                          class="new-service-second-step__content__input amount-to-pay"
                          formControlName="amount"
                          label="Monto"
                          mask="separator">
        <div error>
          {{
          confirmFormGroup.controls.amount.hasError('min') ? 'El monto debe ser mayor a ' + currencySymbol + amount + (amount.split(',').length === 1 ? ',00' : '')
            : confirmFormGroup.controls.amount.hasError('max') ? 'El monto debe ser menor a ' + currencySymbol + amount + (amount.split(',').length === 1 ? ',00' : '')
            : confirmFormGroup.controls.amount.hasError('required') ? 'ingrese el monto' : null
          }}
        </div>
      </credix-input-field>

    </div>
  </div>

  <mat-divider class="mt-16px" credixDivider></mat-divider>

  <div class="new-service-second-step__content" fxLayout="row" fxLayoutAlign="space-between">
    <credix-code-link></credix-code-link>

    <credix-code-input class="new-service-second-step__content__input left-content" formControlName="credixCode">
     <span *ngIf="confirmFormGroup.controls.credixCode.hasError('required')"
           error>Introduzca el código credix.</span>
      <span *ngIf="confirmFormGroup.controls.credixCode.hasError('invalid')"
            error>Código MiCredix inválido.</span>
    </credix-code-input>
  </div>

</form>
