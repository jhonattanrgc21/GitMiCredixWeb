<credix-navigation-table [headers]="tableHeaders" class="favorites-services">

  <ngx-simplebar [options]="{autoHide: false, scrollbarMinSize: 100}" class="left-container" fxLayout="column" left>
    <div class="favorites-services__options-wrapper" fxLayout="column">
      <a
        (click)="publicServiceChange(favorite)"
        *ngFor="let favorite of publicFavoriteService" class="favorites-services__option pointer"
        fxLayout="row">
        <mat-icon [svgIcon]="favorite.icon" class="mr-16px" fxFlex="16px"
                  style="fill: #B5B5B5; width: 16px; height: 25px;"></mat-icon>
        <div fxFlex="180px" fxLayout="column">
          <span [class.bold]="selectedPublicService?.publicServiceFavoriteId === favorite.publicServiceFavoriteId"
                fxLayout="row"
                fxLayoutAlign="flex-start center">
            {{favorite.publicServiceFavoriteName}}
          </span>
          <span class="truncate">
            {{
            favorite.publicServiceCategory === 'Recargas' || favorite.publicServiceCategory === 'Telefonía' ?
              (favorite.serviceReference | mask: '0000-0000') :
              favorite.publicServiceProviderPrefix + '-' + favorite.serviceReference
            }}
          </span>
        </div>
        <mat-icon *ngIf="selectedPublicService?.publicServiceFavoriteId === favorite.publicServiceFavoriteId" fxFlex
                  style="fill: #E42313; width: 8px; height: 13px;" svgIcon="chevron_right"></mat-icon>
      </a>
    </div>
  </ngx-simplebar>

  <div class="h-100 relative" fxLayout="column" fxLayoutAlign="flex-start center" right>

    <credix-result-notification *ngIf="showMessage"
                                [status]="status"
                                [title]="message" class="favorites-services__notification"></credix-result-notification>

    <div *ngIf="hasReceipts" class="favorites-services__table" fxLayout="column" fxLayoutGap="16px">
      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Compañía</span>
        <span class="tr">{{selectedPublicService?.publicServiceEnterpriseDescription}}</span>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Nombre</span>
        <span class="tr">{{pendingReceipt?.clientName}}</span>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Mes al cobro</span>
        <span class="tr">{{month}}</span>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Vencimiento</span>
        <span class="tr">
          {{expirationDate | dateFormatter : 'alphanumeric'}}</span>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between">
        <span>Recibos pendientes</span>
        <span class="tr">{{ pendingReceipt?.numberPendingReceipts}}</span>
      </div>
      <div *ngIf="!isRecharge" class="mt-2px" fxLayout="row" fxLayoutAlign="space-between">
        <span><strong>Monto a pagar</strong></span>
        <credix-numeric-block [value]="amountOfPay" prefix="₡"></credix-numeric-block>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between">
        <span fxFlex="150px"><strong>Elija su plazo</strong></span>
      </div>

      <div class="new-service-third-step__content" fxLayout="row" fxLayoutAlign="space-between">
        <credix-slider (inputChange)="getQuota($event)"
                       (valueChange)="getQuota($event)"
                       [displayMax]="termSliderDisplayMax"
                       [displayMin]="termSliderDisplayMin"
                       [displayValue]="termSliderDisplayValue"
                       [max]="termSliderMax"
                       [min]="termSliderMin"
                       [step]="termSliderStep"
                       [instructions]="'Por un período de'"
                       [units]="'Meses'">
        </credix-slider>
        
    
        <div fxFlex="25" fxLayout="column" fxLayoutAlign="flex-start flex-end" fxLayoutGap="4px">
          <span>Cuotas de</span>
    
          <credix-numeric-block [value]="paymentQuotaSummary?.amountPerQuota"
                                fontSize="24"
                                fontWeight="bold"
                                prefix="₡"></credix-numeric-block>
    
          <credix-link-button (click)="openSummary()">Ver detalle</credix-link-button>
        </div>
    
      </div>
    </div>

    <div class="favorites-services__footer">
      <credix-button (buttonClick)="openConfirmationModal()" [disabled]="!hasReceipts || tabChanged"
                     fxLayoutAlign="flex-end center">
        Pagar
      </credix-button>
    </div>
  </div>

</credix-navigation-table>

<ng-template #summaryTemplate>
  <!--<div class="h-100 summary-custom" fxLayout="column" fxLayoutGap="16px">

    <div fxLayout="column" fxLayoutGap="8px">

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span fxFlex>{{ termTag || 'Plazo' }}</span>
        <span><strong>{{ paymentQuotaSummary.quotaTo }} meses</strong></span>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span fxFlex>{{ quoteTag || 'Cuota' }}</span>
        <credix-numeric-block
          [value]="paymentQuotaSummary?.amountPerQuota"
          fontWeight="bold"
          prefix="₡"></credix-numeric-block>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span fxFlex>{{ popupCommissionTag || 'Comisión' }}*
        </span>
        <credix-numeric-block
          [value]="paymentQuotaSummary?.commissionAmount"
          fontWeight="bold"
          prefix="₡"></credix-numeric-block>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span fxFlex>{{ popupInterestTag || 'Interés' }} {{ '(' + paymentQuotaSummary?.feePercentage + '% mensual)' }} 
        </span>
        <credix-numeric-block
          [value]="paymentQuotaSummary?.feeAmount"
          fontWeight="bold"
          prefix="₡"></credix-numeric-block>
      </div>

      <div fxLayout="row" fxLayoutAlign="space-between">
        <span fxFlex>{{ popupIvaTag || 'IVA*'}}</span>
        <credix-numeric-block
        [value]="paymentQuotaSummary?.IVA"
        fontWeight="bold"
        prefix="₡"></credix-numeric-block>
      </div>
    </div>


    <p fxFlex style="color: #707070; font-size: 14px !important; margin-bottom: 26px !important">
      * IVA y comisión se cargarán en el próximo estado de cuenta.
    </p>

    <div fxFlex fxFlexLayout="row" style="padding-top: 10px;" fxLayoutAlign="space-between">
      <span fxFlex style="font-size: 20px !important;">{{ paymentQuotaSummary.quotaTo }} Cuotas de</span>
        <credix-numeric-block
        [value]="paymentQuotaSummary?.amountPerQuota"
        fontSize="24"
        fontWeight="bold"
        prefix="₡"></credix-numeric-block>
    </div>
  </div>-->
</ng-template>
  
<credix-result-notification *ngIf="empty" [title]="'No tiene pagos favoritos en este momento.'"
                            class="favorites-services__empty mt-16px"
                            status="info">
</credix-result-notification>
